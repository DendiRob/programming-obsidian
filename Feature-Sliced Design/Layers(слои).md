[[What is FCD]]

>[!info]
>Слои(layer) - это первый уровень организационной иерархии в Feature-Sliced Design. Их цель - разделить код на основе того, сколько ответственности ему требуется и от скольких других модулей в приложении он зависит.

![[../imgs/FCD/Pasted image 20240121153134.png]]

* Слоев строго 7, некоторые из которых опциональные.
* Каждый слой обладает своей зоной ответственности
* Используем только нижележащие слои, то есть компонент слоя features не может использовать другой компонент из этого слоя 
## Правило импортов для слоёв[​](https://feature-sliced.design/ru/docs/reference/layers#%D0%BF%D1%80%D0%B0%D0%B2%D0%B8%D0%BB%D0%BE-%D0%B8%D0%BC%D0%BF%D0%BE%D1%80%D1%82%D0%BE%D0%B2-%D0%B4%D0%BB%D1%8F-%D1%81%D0%BB%D0%BE%D1%91%D0%B2 "Прямая ссылка на этот заголовок")

Слои состоят из _слайсов_ — сильно сцепленных групп модулей. Feature-Sliced Design поддерживает низкую связанность, поэтому зависимости между слайсами регулируются **правилом импортов для слоёв**:

> _Модуль в слайсе может импортировать другие слайсы только в том случае, если они расположены на слоях строго ниже._

Например, в `~/features/aaa`, слайсом является `aaa`, поэтому файл `~/features/aaa/api/request.ts` не может импортировать код ни из какого модуля в папку из `~/features/bbb`, но может импортировать код из `~/entities` и `~/shared`, а также из соседних модулей в `~/features/aaa`.

## Определяем слои

### Shared

Изолированные модули, компоненты и абстракции, отдельные от специфики проекта или бизнеса. Внимание: не следует использовать этот слой как [свалку утилит](https://sova.dev/ru/why-utils-and-helpers-is-a-dump/)!

**Примеры содержимого**:
- UI-библиотека
- API-клиент
- Код, работающий с API браузера

### Entities

Понятия из реального мира, которые вместе образуют суть проекта. Как правило, это термины, которые бизнес использует для описания продукта.
Каждый слайс этого слоя содержит статические элементы пользовательского интерфейса, хранилища данных и операции CRUD (создание-чтение-изменение-удаление).

**Примеры слайсов**:
- Пользователь
- Публикация
- Группа

### Features

Действия, которые пользователь может совершать в приложении для взаимодействия с бизнес-сущностями, чтоб достичь ценного для себя результата. Сюда также входят действия, которые приложение выполняет от имени пользователя, чтобы создать для него ценность.

Слайс на этом слое может содержать _интерактивные_ элементы пользовательского интерфейса, внутреннее состояние и запросы к API, которые позволяют выполнять действия, создающие ценность.

![[../imgs/FCD/Pasted image 20240121161036.png]]

### Widgets

Самодостаточные блоки пользовательского интерфейса возникли из композиции единиц более низкого уровня, таких как сущности и функции.

Этот слой предоставляет возможность заполнить слоты, оставленные в интерфейсе сущностей, другими сущностями и интерактивными элементами из фич. Поэтому обычно на этом слое не размещается бизнес-логика, вместо этого она хранится в фичах. Каждый слайс на этом слое содержит готовые к использованию компоненты пользовательского интерфейса и иногда не-бизнес-логику, например, жесты, взаимодействие с клавиатурой и т.д.

Иногда удобнее разместить бизнес-логику на этом слое. Зачастую, это происходит тогда, когда виджет имеет довольно много интерактивности (например, интерактивные таблицы) и бизнес-логика в нём не переиспользуется.

Примеры: 
 * Header
 * Footer
 * Sidebar
 
### Pages[​](https://feature-sliced.design/ru/docs/reference/layers#pages "Прямая ссылка на этот заголовок")
Полноценные страницы для страничных приложений (например, веб-сайтов) или экраны/активности для экранных приложений (например, мобильных приложений).

По своей композиционной природе этот слой похож на Widgets, хоть и в большем масштабе. Каждый слайс на этом слое содержит компоненты пользовательского интерфейса, готовые к подключению к роутеру, а также может содержать логику получения данных и обработки ошибок.

### Processes

>[!warning] ПРЕДУПРЕЖДЕНИЕ
Этот слой считается устаревшим. Текущая версия спецификации рекомендует избегать его и перемещать его содержимое в `features` и `app`.

Выход из ситуаций, когда требуется сложное многостраничное взаимодействие.

Этот уровень намеренно оставлен не очень определенным. Большинству приложений этот слой не пригодится, логику на уровне роутера и сервера следует оставить на уровне App. Рассмотрите возможность использования этого слоя только тогда, когда слой App вырастет настолько, что станет неподдерживаемым и потребует разгрузки.

### App[​](https://feature-sliced.design/ru/docs/reference/layers#app "Прямая ссылка на этот заголовок")

Всё, что касается всего приложения, как в техническом смысле (например, провайдеры контекста), так и в бизнес-смысле (например, аналитика).
Этот слой обычно не содержит слайсов, как и Shared, вместо этого он содержит непосредственно сегменты.

**Примеры содержимого**:
- Стили
- Роутер
- Хранилища данных и прочие провайдеры контекста
- Инициализация аналитики