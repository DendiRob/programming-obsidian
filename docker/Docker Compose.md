>[!info]
>Docker Compose — это инструментальное средство, входящее в состав Docker. Оно предназначено для решения задач, связанных с развёртыванием проектов.

## docker-compose.yml структура
```yaml
# Мы используем "3" так как это - самая свежая версия на момент написания этого кода.
# вроде уже не надо указывать
version: "3"


# Здесь определяем какие сервисы будут запускаться
services:
	server:
		# файл из которого будет создаваться образ для запуска сервера (докерфайл или сразу конкретный образ из докерхаба)
		# Представим, что у нас есть папка с серверным приложением и докерфайлом внутри
		build: ./server
		# Команда, которую нужно запустить после создания образа.
		# Следующая команда означает запуск "node ./server.js".
		command: node ./server.js
		# Наш сервер запускается на порту 3001.    
		# Если мы хотим обратиться к серверу с нашего компьютера (находясь за пределами контейнера),    
		# мы должны организовать перенаправление этого порта на порт компьютера.    
		# Сделать это нам поможет ключевое слово 'ports'.    
		# При его использовании применяется следующая конструкция: [порт компьютера]:[порт контейнера]    
		# В нашем случае нужно использовать порт компьютера 3001 и организовать его связь с портом    
		# 3001 контейнера (так как именно на этот порт сервер     
		# ожидает поступления запросов).    
		 ports:     
		  - 3001:3001
	# client сервис
	client:
		build: ./client
		ports:     
		  - 3000:80
		# запускаем клиент после сервера
		depends_on:     
			- server
	
```

##  Сборка проекта

```yaml
docker-compose build
```
##  Запуск проекта

```yaml
docker-compose up
```

## Networking

По дефолту запускается одна сеть, в которой можно подключатся по названию сервиса 

```yaml
services:
  server:
    build: .
    ports:
      - "8000:8000"
	# Доступ по названию сервиса postgres://db:5432
  db:
    image: postgres
    ports:
      - "8001:5432"
```

>[!warning]
>по дефолту используется CONTAINER_PORT (8001 в нашем случае), но если определен HOST_PORT, то он сервис  доступен и вне контейнера на самой машине (надо убедиться)

## Также можно создавать дополнительные aliases для сервисов (links)

```yaml
services:

  web:
    build: .
    links:
      - "db:database"
  db:
    image: postgres
```